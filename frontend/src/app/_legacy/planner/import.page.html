<div class="container mx-auto px-4 py-6">
  <h2 class="text-2xl font-bold mb-6">Import Poles</h2>

  @if (error()) {
    <p-message severity="error" [text]="error() || ''" class="mb-4" />
  }

  <p-card>
    <div class="mb-4">
      <label class="block text-sm font-medium mb-2">Days to Import</label>
      <p-inputNumber [(ngModel)]="days" [min]="1" [max]="31" class="w-full" />
      <p class="text-sm text-gray-500 mt-1">
        Import poles with DueDate within the next N days
      </p>
    </div>
    <p-button
      label="Import Poles"
      icon="pi pi-download"
      [loading]="loading()"
      (onClick)="importPoles()"
    />
  </p-card>

  @if (lastResult(); as result) {
    <p-card class="mt-6">
      <h3 class="text-lg font-semibold mb-4">Last Import Result</h3>
      <dl class="grid grid-cols-2 gap-4">
        <div>
          <dt class="text-sm text-gray-500">Imported</dt>
          <dd class="text-lg font-semibold">{{ result.imported }}</dd>
        </div>
        <div>
          <dt class="text-sm text-gray-500">Updated</dt>
          <dd class="text-lg font-semibold">{{ result.updated }}</dd>
        </div>
        <div>
          <dt class="text-sm text-gray-500">Total</dt>
          <dd class="text-lg font-semibold">{{ result.total }}</dd>
        </div>
        <div>
          <dt class="text-sm text-gray-500">Date Range</dt>
          <dd class="text-lg font-semibold">
            {{ result.fromDueDate }} to {{ result.toDueDate }}
          </dd>
        </div>
      </dl>
    </p-card>
  }
</div>

